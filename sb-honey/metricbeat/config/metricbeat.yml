# https://github.com/elastic/beats/blob/master/metricbeat/metricbeat.reference.yml

#-------------------------------- Autodiscovery -------------------------------
# Autodiscover allows you to detect changes in the system and spawn new modules as they happen.
metricbeat.autodiscover:
    providers:
      - type: docker
        # https://www.elastic.co/guide/en/beats/metricbeat/current/configuration-autodiscover-hints.html
        hints.enabled: true
  
  metricbeat.modules:
  #------------------------------- Docker Module -------------------------------
  - module: docker
    metricsets: ["container", "cpu", "diskio", "healthcheck", "info", "memory", "network"]
    hosts: ["unix:///var/run/docker.sock"]
    period: 10s
  
  #================================ Processors ===================================
  processors:
  - add_cloud_metadata: ~
  - add_docker_metadata: ~
  - add_locale:
      format: offset
  - add_host_metadata:
      netinfo.enabled: true  
  #============================== Xpack Monitoring ===============================
  xpack.monitoring:
    enabled: true
    elasticsearch: